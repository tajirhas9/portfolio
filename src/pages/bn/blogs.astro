---
import "../../styles/global.css";
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";
import NavBar from "../../components/NavBar.astro";
import BlogList from "../../components/BlogList.vue";
import {getLangFromUrl} from '../../i18n/utils.ts';

const lang = getLangFromUrl(Astro.url);
let posts = await getCollection("blog")
posts = posts.filter(post => post.data.language === lang).sort((a, b) => {
    return new Date(b.data.date) - new Date(a.data.date);
});
---

<Layout>
    <NavBar />
    <BlogList all-posts={posts} lang={lang} client:load />
</Layout>

<style>
    body {
        font-family: "RobotoLocal", sans-serif;
    }

    @media screen and (min-width: 40em) {
        .blog-list {
            max-width: 43em;
            margin: 0 auto;
        }
    }
</style>
